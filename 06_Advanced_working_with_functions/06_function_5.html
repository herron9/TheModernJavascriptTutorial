<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Advanced working with functions - 10-11 </title>
</head>
<body>
  <script>
  	"use strict";

  	//  ==================================== Function binding ====================================

  	// TASKs
  	// Fix a function that loses "this"
  	function askPassword(ok, fail) {
	  let password = prompt("Password?", '');
	  if (password == "rockstar") ok();
	  else fail();
	}

	let user = {
	  name: 'John',

	  loginOk() {
	    console.log(`${this.name} logged in`);
	  },

	  loginFail() {
	    console.log(`${this.name} failed to log in`);
	  },

	};

	askPassword(user.loginOk.bind(user), user.loginFail.bind(user));

	// Partial application for login

	function askPassword(ok, fail) {
	  let password = prompt("Password?", '');
	  if (password == "rockstar") ok();
	  else fail();
	}

	let userNew = {
	  name: 'John',

	  login(result) {
	    console.log( this.name + (result ? ' logged in' : ' failed to log in') );
	  }
	};

	askPassword(userNew.login.bind(user, true), userNew.login.bind(user, false)); 

	// ==================================== Arrow functions revisited ====================================

	// forEach runs functions with this=undefined by default, that doesn’t affect arrow functions, because they just don’t have this.

	// Arrow functions also have no arguments variable.

	// and can’t be called with new.



  </script>
</body>
</html>